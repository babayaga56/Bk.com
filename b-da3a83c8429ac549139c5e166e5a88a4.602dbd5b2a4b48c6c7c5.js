"use strict";(self.webpackChunkvk=self.webpackChunkvk||[]).push([[212],{13:function(e,t,n){n.d(t,{VK_DOMAIN_REGEX:function(){return f},VK_HOST_REGEX_GROUP_UNSAFE:function(){return s},VK_HOST_REGEX_UNSAFE:function(){return a},VK_ORIGIN_PREFIX_REGEX:function(){return g},VK_ORIGIN_REGEX:function(){return p},VK_ORIGIN_REGEX_STRICT:function(){return d},VK_POSSIBLE_SITE_HOSTS:function(){return o},VK_SITES_REGEX_SOURCE_UNSAFE:function(){return u},VK_SITE_REGEX_SOURCE_UNSAFE:function(){return c},VK_URL_REGEX:function(){return m},VK_URL_REGEX_STRICT:function(){return h},getAverageRGB:function(){return S},getBlobType:function(){return _},getGlobalObject:function(){return v},getHostName:function(){return y},getMediaBlob:function(){return b},getPhotoFromVideo:function(){return I},getVideoDuration:function(){return R},isMvk:function(){return w},isPWA:function(){return E},loadFontFacePromise:function(){return A},loadImage:function(){return k},loadImages:function(){return j},loadVideo:function(){return O},noop:function(){return T}});var r=n(14);const o=["vk.com","vk.ru",y()].filter(((e,t,n)=>n.indexOf(e)===t)),i=o.concat(["vkontakte.ru","vk.me","userapi.com"]),c=(0,r.escapeRE)(y()),u=o.map(r.escapeRE).join("|"),a=new RegExp("("+i.map(r.escapeRE).join("|")+")"),s=new RegExp(i.map(r.escapeRE).join("|")),l=(new RegExp("^"+a.source+"$"),new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${a.source}`)),f=new RegExp("^"+l.source+"$"),p=new RegExp(`^(https?:\\/\\/)?${l.source}$`),d=new RegExp(`^(https?:\\/\\/)${l.source}$`),g=new RegExp(`^(https?:\\/\\/)${l.source}`),m=new RegExp(`^(https?:\\/\\/)?${l.source}($|\\/(.*))`),h=new RegExp(`^(https?:\\/\\/)${l.source}($|\\/(.*))`);function w(){return!!window.isMVK}function E(){var e,t,n;return null==(n=window.vk)||null==(t=n.platform)||null==(e=t.startsWith)?void 0:e.call(t,"pwa")}function y(){var e;return(null==(e=v().vk)?void 0:e.__domain)||"vk.com"}function v(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}function R(e=""){return new Promise(((t,n)=>{const r=document.createElement("video");r.addEventListener("loadedmetadata",(()=>t(r.duration)),{once:!0}),r.addEventListener("error",n,{once:!0}),r.crossOrigin="anonymous",r.preload="metadata",r.src=e}))}function b(e){return new Promise(((t,n)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=()=>{if(404===r.response.status)return n();t(r.response)},r.onerror=n,r.send()}))}function _(e){try{return e.type.split("/").splice(-1)[0]}catch(e){return null}}const T=()=>{};function S(e,t=0,n=0,r,o){const i={r:0,g:0,b:0};let c;r=r||e.canvas.width,o=o||e.canvas.height;try{c=e.getImageData(t,n,r,o)}catch(e){return i}let u=-4,a=0;for(;(u+=20)<c.data.length;)++a,i.r+=c.data[u],i.g+=c.data[u+1],i.b+=c.data[u+2];return i.r=~~(i.r/a),i.g=~~(i.g/a),i.b=~~(i.b/a),i}function O(e){return new Promise(((t,n)=>{const r=document.createElement("video");r.muted=!0,r.autoplay=!0,r.addEventListener("canplay",(()=>{r.pause(),t(r)}),{once:!0}),r.addEventListener("error",n,{once:!0}),r.crossOrigin="anonymous",r.src=e}))}function I(e,t=[0]){const n=[];return new Promise(((r,o)=>{const i=document.createElement("canvas"),c=i.getContext("2d"),{videoWidth:u,videoHeight:a}=e;i.width=u,i.height=a,function s(l){const f=e.currentTime;e.addEventListener("seeked",(()=>{var p;null==(p=c)||p.drawImage(e,0,0,u,a,0,0,u,a),e.currentTime=f,k(i.toDataURL("image/jpeg",1)).then((o=>{n.push(o),l>=t.length-1?(e.src="",r(n)):s(l+1)})).catch(o)}),{once:!0}),e.currentTime=-1===t[l]?e.duration:t[l]}(0)}))}function k(e){return new Promise(((t,n)=>{const r=new Image;r.crossOrigin=e.startsWith("data:")?null:"Anonymous",r.onerror=()=>n(new Error(`Failed to load image's URL: ${e}`)),r.onload=()=>t(r),r.src=e}))}const j=e=>new Promise((t=>{const n=e.map((e=>k(e)));Promise.all(n).then((e=>t(e))).catch((()=>{}))}));function x(e,t){const n={normal:"400",500:"500",600:"600",bold:"700"},r={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal"},o={display:"block","font-size":"48px","line-height":"normal","font-variant":"normal","white-space":"nowrap",position:"absolute",visibility:"hidden",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0"};let i,c,u,a,s,l,f;function p(e){let t=[];return each(e,(function(e,n){t.push(e+":"+n)})),t.join(";")}function d(e,t,n){return Math.abs(e.width-t.offsetWidth)>n||Math.abs(e.height-t.offsetHeight)>n}function g(){a||(utilsNode.appendChild(s),a=!0,u={sansSerif:{width:f.offsetWidth,height:f.offsetHeight},serif:{width:l.offsetWidth,height:l.offsetHeight}},browser.opera&&!browser.chrome?(f.style.fontFamily='"'+e+'", sans-serif',l.style.fontFamily='"'+e+'", serif'):(setStyle(f,"font-family",'"'+e+'", sans-serif'),setStyle(l,"font-family",'"'+e+'", serif'))),a&&u&&(d(u.sansSerif,f,t.tolerance)||d(u.serif,l,t.tolerance))?(re(s),t.success()):(new Date).getTime()-c.getTime()>t.timeout?(re(s),t.error()):!a&&"requestAnimationFrame"in window?window.requestAnimationFrame(g):window.setTimeout(g,t.delay)}for(let e in r)t.hasOwnProperty(e)||(t[e]=r[e]);o["font-weight"]=t.weight,o["font-style"]=t.style,!t.glyphs&&"fonts"in document?(t.timeout&&(i=setTimeout((function(){t.error()}),t.timeout)),function(r){var o;each(null==(o=document)?void 0:o.fonts,(function(o){o.family.toLowerCase()===e.toLowerCase()&&(n[o.weight]||o.weight)===""+t.weight&&o.style===t.style&&o.load().then((function(){t.success(),clearTimeout(r)}))}))}(i)):function(){const e="AxmTYklsjo190QW"+t.glyphs;c=new Date,s=ce("div"),f=ce("div",{innerHTML:e}),l=ce("div",{innerHTML:e}),f.setAttribute("style",p(extend({"font-family":"sans-serif"},o))),l.setAttribute("style",p(extend({"font-family":"serif"},o))),s.appendChild(f),s.appendChild(l),g()}()}function A(e,t){return new Promise(((n,r)=>{x(e,{...t,glyphs:"",success(){const e=()=>{var e;n(),(null==(e=t)?void 0:e.success)&&t.success()};browser.safari?setTimeout(e,150):e()},error(){var e;r(),(null==(e=t)?void 0:e.error)&&t.error()}})}))}},14:function(e,t,n){n.d(t,{clean:function(){return j},copy:function(){return S},each:function(){return T},escapeAttr:function(){return d},escapeRE:function(){return r.escapeRegExp},escapeStr:function(){return h},htsc:function(){return p},intval:function(){return _},irand:function(){return y},isAnchorElement:function(){return k},isArray:function(){return s},isElement:function(){return I},isEmpty:function(){return f},isFormData:function(){return u},isFunction:function(){return c},isHttpHref:function(){return R},isObject:function(){return l},isRetina:function(){return r.isRetina},isString:function(){return a},isUndefined:function(){return i},rand:function(){return o},replaceEntities:function(){return m},srand:function(){return E},stripTags:function(){return w},unclean:function(){return x},unescapeAttr:function(){return g},utf2win:function(){return v},vkImage:function(){return O},vkNow:function(){return b}});var r=n(3);const o=(e,t)=>Math.random()*(t-e+1)+e,i=e=>void 0===e,c=e=>e&&"[object Function]"===Object.prototype.toString.call(e),u=e=>e&&"[object FormData]"===Object.prototype.toString.call(e),a=e=>"string"==typeof e,s=e=>"[object Array]"===Object.prototype.toString.call(e),l=e=>"[object Object]"===Object.prototype.toString.call(e),f=e=>{if(!l(e))return!1;for(let t in e)if(e.hasOwnProperty(t))return!1;return!0},p=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;"),d=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;"),g=e=>e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'"),m=e=>{const t=document.createElement("textarea");return t.innerHTML=(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),t.value},h=e=>e.replace(/\'/g,"\\'"),w=e=>e.replace(/<[^>]+>/g,""),E=()=>Math.random().toString(36).substr(2),y=(e,t)=>Math.floor(o(e,t)),v=e=>unescape(encodeURIComponent(e));function R(e){let t=(e+"").split(":"),n=t[1]&&t[0]?t[0]+":":location.protocol;return"http:"===n||"https:"===n}const b=()=>+new Date;function _(e){return!0===e?1:parseInt(e)||0}function T(e,t){if(!e)return e;if(l(e)||void 0===e.length){for(let n in e)if(e.hasOwnProperty(n)&&!1===t.call(e[n],n,e[n]))break}else for(let n=0,r=e.length;n<r;n++){const r=e[n];if(!1===t.call(r,n,r))break}return e}function S(e){return s(e)?e.concat([]):l(e)?Object.assign({},e):e}const O=()=>window.Image?new Image:document.createElement("img"),I=e=>"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName;function k(e){return"object"==typeof e&&I(e)&&"A"===e.tagName}function j(e=""){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function x(e){return e?m(e.replace(/\t/g,"\n")):e}}}]);